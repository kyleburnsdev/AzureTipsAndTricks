<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Tip 196 - Testing Azure Functions | Azure Tips and Tricks</title>
    <meta name="description" content="">
    <link rel="apple-touch-icon" sizes="57x57" href="/AzureTipsAndTricks/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/AzureTipsAndTricks/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/AzureTipsAndTricks/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/AzureTipsAndTricks/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/AzureTipsAndTricks/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/AzureTipsAndTricks/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/AzureTipsAndTricks/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/AzureTipsAndTricks/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/AzureTipsAndTricks/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/AzureTipsAndTricks/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/AzureTipsAndTricks/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/AzureTipsAndTricks/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/AzureTipsAndTricks/favicon-16x16.png">
  <link rel="manifest" href="/AzureTipsAndTricks/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <script async="true" src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
    
    <link rel="preload" href="/AzureTipsAndTricks/assets/css/0.styles.9e4235cc.css" as="style"><link rel="preload" href="/AzureTipsAndTricks/assets/js/app.c6e6cf6c.js" as="script"><link rel="preload" href="/AzureTipsAndTricks/assets/js/4.1e17da4f.js" as="script"><link rel="preload" href="/AzureTipsAndTricks/assets/js/111.aaa2dfc0.js" as="script"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/10.f02de62f.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/100.c911c2a4.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/101.f21aa11e.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/102.a7175f82.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/103.ec00b13d.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/104.75cd47d9.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/105.1c388ee4.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/106.1f85e5a2.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/107.cca0d31c.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/108.bc454e6b.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/109.501545c3.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/11.0969bd96.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/110.1909f742.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/112.b2727ad2.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/113.681e1882.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/114.ba69c74a.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/115.6f7c5113.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/116.1bb5df9e.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/117.81fdaba0.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/118.324dcd23.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/119.fdc0f510.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/12.35463b87.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/120.d8c81e32.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/121.c59489bb.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/122.df67489d.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/123.fc3909d3.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/124.09d42f12.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/125.e68449e9.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/126.5d9b8466.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/127.06b4f5ed.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/128.05d9a839.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/129.c5d64dda.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/13.4af9d49f.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/130.a81073e1.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/131.ee992222.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/132.1adf69ca.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/133.abc02261.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/134.87aa7ba1.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/135.88a6a960.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/136.600ce307.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/137.94bfa78a.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/138.6bf6f32c.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/139.0cef8b3b.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/14.aab86404.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/140.60f3e0e4.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/141.02cae3ef.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/142.8f7928a9.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/143.d5d74154.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/144.a9f8a152.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/145.edd3d380.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/146.f4a03c9e.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/147.ec6f0277.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/148.762f18c9.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/149.ee52e826.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/15.202fc9e8.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/150.3d74779b.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/151.803fffc2.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/152.e62ba824.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/153.47ca7826.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/154.4a7edff3.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/155.d20cafb7.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/156.8115fbdd.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/157.0dfc2193.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/158.e6253b49.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/159.f234e2db.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/16.0b17ece3.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/160.bf60efff.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/161.17ba7a97.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/162.4d3f6617.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/163.9c1a7a95.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/164.aa268578.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/165.8b8eaad3.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/166.5e37642b.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/167.c2361510.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/168.e4f5f167.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/169.92bf6bb3.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/17.9d638614.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/170.ccfed087.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/171.92282f1e.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/172.2486f8f4.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/173.1fb31b50.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/174.3cdc3306.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/175.ca725b12.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/176.2473a285.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/177.bc0707d0.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/178.e4e33730.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/179.6235b596.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/18.bf478ba7.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/180.af6c3409.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/181.73b07d02.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/182.71c34ec1.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/183.4654e930.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/184.1a0300bd.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/185.704177e7.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/186.adb939dc.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/187.e58f68ab.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/188.de549220.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/189.df6ccba0.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/19.c0662e36.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/190.50b87f10.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/191.77bbdb63.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/192.ab212160.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/193.cdc8f820.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/194.e44cc3ff.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/195.53e8d755.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/196.28b53213.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/197.4db7c742.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/198.e96ae03d.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/199.a205c2c3.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/20.b53e2000.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/200.b3ed4e8c.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/201.18069a75.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/202.8706622d.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/203.45662190.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/204.ea752f70.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/205.be64c043.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/21.eb13dd9a.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/22.341845c4.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/23.93c6b265.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/24.4624d116.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/25.f4ce27e0.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/26.4287bd58.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/27.a186741c.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/28.5635f6e4.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/29.474351c5.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/3.5ca0f648.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/30.29d34947.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/31.0963448a.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/32.b089328e.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/33.d12bd92a.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/34.d8d62195.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/35.f0ee48e7.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/36.3c05d0f1.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/37.bb56c778.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/38.f4d4212e.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/39.f54b1369.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/40.ef3ec39e.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/41.94037173.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/42.8252409c.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/43.a7d8a677.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/44.5ce90904.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/45.80a75b1c.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/46.8587183b.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/47.c77fff93.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/48.0ccb84a7.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/49.6521472c.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/5.b32c499c.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/50.fd826f6c.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/51.8d8d17e8.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/52.29b4e257.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/53.46207ab5.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/54.7992ae70.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/55.f51a7fb3.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/56.f51f84d9.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/57.32109f3e.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/58.e7780824.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/59.e0422c9c.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/6.c702ed47.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/60.04c9b438.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/61.5c27f1eb.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/62.90378d58.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/63.27802084.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/64.71413ce4.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/65.926e2b17.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/66.031c476a.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/67.3f8b2822.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/68.3683ed15.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/69.a4dfe08e.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/7.ee00b141.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/70.3e6f566d.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/71.1f765412.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/72.7df66d68.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/73.49a09ec1.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/74.8fda430f.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/75.7f0b2420.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/76.339c5472.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/77.b3dd211b.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/78.e659aaea.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/79.36a6a5f9.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/8.a6298403.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/80.83a0b870.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/81.c1b4c145.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/82.42afa26b.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/83.6965dbe3.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/84.3a69d378.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/85.4a8b1607.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/86.e98942af.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/87.2fc28265.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/88.fa039b0b.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/89.45df651f.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/9.7421982f.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/90.a5afef77.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/91.d4e2e9b1.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/92.baa8d109.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/93.3f069468.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/94.a087eb1f.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/95.2df3ecbc.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/96.60e27e69.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/97.fe9f0e4b.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/98.f08b949a.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/99.bd8c9e8c.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/vendors~docsearch.9a8918f9.js">
    <link rel="stylesheet" href="/AzureTipsAndTricks/assets/css/0.styles.9e4235cc.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/AzureTipsAndTricks/" class="home-link router-link-active"><img src="/AzureTipsAndTricks/files/vintage.png" alt="Azure Tips and Tricks" class="logo"> <span class="site-name can-hide">Azure Tips and Tricks</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/AzureTipsAndTricks/" class="nav-link">Home</a></div><div class="nav-item"><a href="http://videos.azuredev.tips" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Videos
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="/AzureTipsAndTricks/#site-map" class="nav-link">eBooks</a></div><div class="nav-item"><a href="https://github.com/Microsoft/AzureTipsAndTricks/issues/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Questions?
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://microsoft.github.io/AzureTipsAndTricks/rss.xml" class="nav-link">
  RSS Feed
</a></div> <a href="https://github.com/microsoft/azuretipsandtricks" target="_blank" rel="noopener noreferrer" class="repo-link">
    Star this Repo
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/AzureTipsAndTricks/" class="nav-link">Home</a></div><div class="nav-item"><a href="http://videos.azuredev.tips" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Videos
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="/AzureTipsAndTricks/#site-map" class="nav-link">eBooks</a></div><div class="nav-item"><a href="https://github.com/Microsoft/AzureTipsAndTricks/issues/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Questions?
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://microsoft.github.io/AzureTipsAndTricks/rss.xml" class="nav-link">
  RSS Feed
</a></div> <a href="https://github.com/microsoft/azuretipsandtricks" target="_blank" rel="noopener noreferrer" class="repo-link">
    Star this Repo
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading"><span>Home</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/AzureTipsAndTricks/" class="sidebar-link">Welcome</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Tips</span> <!----></p> <ul class="sidebar-group-items"></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading open"><span>Recently Added</span> <span class="arrow down"></span></p> <ul class="sidebar-group-items"><li><a href="/AzureTipsAndTricks/blog/tip202.html" class="sidebar-link">Tip 202 - Getting Started with Azure Machine Learning service with Visual Studio Code</a></li><li><a href="/AzureTipsAndTricks/blog/tip201.html" class="sidebar-link">Tip 201 - Creating Custom VM Images in Azure using Packer</a></li><li><a href="/AzureTipsAndTricks/blog/tip200.html" class="sidebar-link">Tip 200 - Build your own Azure CLI Extensions</a></li><li><a href="/AzureTipsAndTricks/blog/tip199.html" class="sidebar-link">Tip 199 - What are Azure CLI Extensions?</a></li><li><a href="/AzureTipsAndTricks/blog/tip198.html" class="sidebar-link">Tip 198 - PowerShell Core on Linux is now integrated with Azure Cloud Shell</a></li><li><a href="/AzureTipsAndTricks/blog/tip197.html" class="sidebar-link">Tip 197 - Getting started with Azure API Management</a></li><li><a href="/AzureTipsAndTricks/blog/tip196.html" class="active sidebar-link">Tip 196 - Testing Azure Functions</a></li><li><a href="/AzureTipsAndTricks/blog/tip195.html" class="sidebar-link">Tip 195 - Use Azure Monitor to track custom events</a></li><li><a href="/AzureTipsAndTricks/blog/tip194.html" class="sidebar-link">Tip 194 - Azure Automation with Windows Machine with PowerShell</a></li><li><a href="/AzureTipsAndTricks/blog/tip193.html" class="sidebar-link">Tip 193 - Build and deploy your first app with the Azure SDK for Go on Azure</a></li><li><a href="/AzureTipsAndTricks/blog/tip192.html" class="sidebar-link">Tip 192 - Getting Started with Azure Front Door</a></li><li><a href="/AzureTipsAndTricks/blog/tip191.html" class="sidebar-link">Tip 191 - Serial console access with Azure VMs - Troubleshooting and diagnosing</a></li><li><a href="/AzureTipsAndTricks/blog/tip190.html" class="sidebar-link">Tip 190 - Multi-Factor Authentication on Azure in a Nutshell</a></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>App Service</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>APIM</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Authentication</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>AzCopy</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>CLI</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Cloud Shell</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Cognitive Services</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Containers</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Cosmos DB</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>DevOps</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Front Door</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Functions</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>HD Insight</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>iOS</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>IoT</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Key Vault</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Logic Apps</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Machine Learning</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Media Services</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Monitor</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Portal</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>PowerShell</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Productivity</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>SAP</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>SDKs</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>SendGrid</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>SignalR</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>SQL</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Storage</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Virtual Machines</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>VNET</span> <span class="arrow right"></span></p> <!----></div></li></ul> </div> <div class="page" data-v-0e4468e2> <div class="content default" data-v-0e4468e2><div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>💡 Learn more : <a href="https://docs.microsoft.com/azure/azure-functions/?WT.mc_id=docs-azuredevtips-micrum" target="_blank" rel="noopener noreferrer">Azure Functions<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <p>📺 Watch the video : <a href="https://www.youtube.com/watch?v=UuM1m8WZxjw&amp;list=PLLasX02E8BPCNCK8Thcxu-Y-XcBUbhFWC&amp;index=53&amp;t=0s?WT.mc_id=youtube-azuredevtips-micrum" target="_blank" rel="noopener noreferrer">How to test Azure Functions<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p></div> <h4 id="testing-azure-functions"><a href="#testing-azure-functions" aria-hidden="true" class="header-anchor">#</a> Testing Azure Functions</h4> <p>I love Azure Functions. I use them all the time to execute small pieces of code without having to worry about how they run. Azure Functions are what they sound like: functions that run in Azure. So pieces of code, that just run in Azure. And they run serverless, which means that they run and scale automatically, without you needing to do anything to make that work.</p> <p>One of the things that I love most about Azure Functions is that they come with bindings and triggers out-of-the-box. With these, you can have a Function run when a new Blob is uploaded to Azure Storage and output a value to an Azure Storage Queue, without writing any of the plumbing code to deal with Azure Storage.
These bindings and triggers are great and the fact that everything runs in Azure is awesome too. All of this does seem to make it difficult to create traditional unit- and integration tests for Azure Functions to make sure that you don't break them when you change your code.</p> <p>Fortunately, it's not that hard to test Azure Functions. Especially now that you can create pre-compiled Azure Functions in Visual Studio. This means that all of the Azure Functions code can run locally. And that makes it testable. Let's take a look.</p> <h5 id="creating-unit-tests-for-azure-functions"><a href="#creating-unit-tests-for-azure-functions" aria-hidden="true" class="header-anchor">#</a> Creating Unit Tests for Azure Functions</h5> <p>Writing unit tests for Azure Functions is just like writing unit tests for any other piece of code. There is some logic, that has input and output parameters, and you need to simulate those.</p> <p>This is what a typical Azure Function with a HTTP trigger looks like:</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token punctuation">[</span><span class="token class-name">FunctionName</span><span class="token punctuation">(</span><span class="token string">&quot;HttpTrigger&quot;</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">async</span> Task<span class="token operator">&lt;</span>IActionResult<span class="token operator">&gt;</span> <span class="token function">RunAsync</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token class-name">HttpTrigger</span><span class="token punctuation">(</span>AuthorizationLevel<span class="token punctuation">.</span>Function<span class="token punctuation">,</span> <span class="token string">&quot;get&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;post&quot;</span><span class="token punctuation">,</span> Route <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token class-name">HttpRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">TraceWriter</span> log<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    log<span class="token punctuation">.</span><span class="token function">Info</span><span class="token punctuation">(</span><span class="token string">&quot;C# HTTP trigger function processed a request.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">string</span> name <span class="token operator">=</span> req<span class="token punctuation">.</span>Query<span class="token punctuation">[</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token keyword">string</span> requestBody <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StreamReader</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>Body<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ReadToEnd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">dynamic</span> data <span class="token operator">=</span> JsonConvert<span class="token punctuation">.</span><span class="token function">DeserializeObject</span><span class="token punctuation">(</span>requestBody<span class="token punctuation">)</span><span class="token punctuation">;</span>
    name <span class="token operator">=</span> name <span class="token operator">?</span><span class="token operator">?</span> data<span class="token operator">?</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span>

    <span class="token keyword">return</span> name <span class="token operator">!=</span> <span class="token keyword">null</span>
        <span class="token operator">?</span> <span class="token punctuation">(</span>ActionResult<span class="token punctuation">)</span><span class="token keyword">new</span> <span class="token class-name">OkObjectResult</span><span class="token punctuation">(</span>$<span class="token string">&quot;Hello, {name}&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token class-name">BadRequestObjectResult</span><span class="token punctuation">(</span><span class="token string">&quot;Please pass a name on the query string or in the request body&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>To start creating unit tests, you first need a test project to put them in. You can create one by right-clicking on the solution file that contains the Azure Function and clicking <strong>Add &gt; new Project</strong>. Now, select the MSTest test project, just like in the image below. This creates a project that you can use to create your tests in and run them.</p> <img src="/AzureTipsAndTricks/files/CreateATestProject.png"> <p>(Create a test project in Visual Studio)</p> <p>So if you want to create a unit test for the function that we've seen earlier, you need to replicate the behavior of the parameters that go into the function:</p> <ul><li>HttpRequest req</li> <li>TraceWriter log</li></ul> <p>For a unit test, you wouldn't simulate the HttpTrigger as it doesn't matter how the function is triggered. The unit test is all about the logic inside the function.</p> <p>So how would you simulate these input parameters? Well, you could do something like this for the HttpRequest object:</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token keyword">public</span> <span class="token class-name">HttpRequest</span> <span class="token function">HttpRequestSetup</span><span class="token punctuation">(</span>Dictionary<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> StringValues<span class="token operator">&gt;</span> query<span class="token punctuation">,</span> <span class="token keyword">string</span> body<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">var</span> reqMock <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token generic-method"><span class="token function">Mock</span><span class="token punctuation">&lt;</span><span class="token class-name">HttpRequest</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    reqMock<span class="token punctuation">.</span><span class="token function">Setup</span><span class="token punctuation">(</span>req <span class="token operator">=</span><span class="token operator">&gt;</span> req<span class="token punctuation">.</span>Query<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Returns</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">QueryCollection</span><span class="token punctuation">(</span>query<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> stream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MemoryStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> writer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StreamWriter</span><span class="token punctuation">(</span>stream<span class="token punctuation">)</span><span class="token punctuation">;</span>
    writer<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span>
    writer<span class="token punctuation">.</span><span class="token function">Flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    stream<span class="token punctuation">.</span>Position <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    reqMock<span class="token punctuation">.</span><span class="token function">Setup</span><span class="token punctuation">(</span>req <span class="token operator">=</span><span class="token operator">&gt;</span> req<span class="token punctuation">.</span>Body<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Returns</span><span class="token punctuation">(</span>stream<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> reqMock<span class="token punctuation">.</span>Object<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>This code uses the <a href="https://github.com/moq/moq4" target="_blank" rel="noopener noreferrer">Moq<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> framework to mock the behavior of the <strong>HttpRequest</strong> object. When you mock an object, the mock object mimics the behavior of it, letting the code in the test interact with it as if it were real. So when you write unit tests for something like an Azure Function, you can mock the parameter objects by looking at what they do. Often you can find this out by looking at them in the object explorer in Visual Studio. Alternatively, you can find this out in the <a href="https://docs.microsoft.com/azure/azure-functions" target="_blank" rel="noopener noreferrer">documentation<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <p>And for the TraceWriter parameter, you could do something like this:</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">VerboseDiagnosticsTraceWriter</span> <span class="token punctuation">:</span> <span class="token class-name">TraceWriter</span>
<span class="token punctuation">{</span>        
    <span class="token keyword">public</span> <span class="token function">VerboseDiagnosticsTraceWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">base</span><span class="token punctuation">(</span>TraceLevel<span class="token punctuation">.</span>Verbose<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
            
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token keyword">void</span> <span class="token function">Trace</span><span class="token punctuation">(</span><span class="token class-name">TraceEvent</span> traceEvent<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        Debug<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>traceEvent<span class="token punctuation">.</span>Message<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>This actually writes the log messages using <strong>Debug.WriteLine()</strong> and by implementing the abstract <strong>Microsoft.Azure.WebJobs.Host.TraceWriter</strong> class. So you don't always have to mock objects. You just need to simulate the objects however you can.</p> <p>So now, a unit test for the Azure Function can look like this:</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token punctuation">[</span><span class="token class-name">TestMethod</span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token class-name">Task</span> <span class="token function">Request_With_Query</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">var</span> query <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token generic-method"><span class="token function">Dictionary</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">StringValues</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    query<span class="token punctuation">.</span><span class="token function">TryAdd</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Michael&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> body <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>

    <span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token keyword">await</span> HttpTrigger<span class="token punctuation">.</span><span class="token function">RunAsync</span><span class="token punctuation">(</span>req<span class="token punctuation">:</span> <span class="token function">HttpRequestSetup</span><span class="token punctuation">(</span>query<span class="token punctuation">,</span> body<span class="token punctuation">)</span><span class="token punctuation">,</span> log<span class="token punctuation">:</span> log<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> resultObject <span class="token operator">=</span> <span class="token punctuation">(</span>OkObjectResult<span class="token punctuation">)</span>result<span class="token punctuation">;</span>
    Assert<span class="token punctuation">.</span><span class="token function">AreEqual</span><span class="token punctuation">(</span><span class="token string">&quot;Hello, Michael&quot;</span><span class="token punctuation">,</span> resultObject<span class="token punctuation">.</span>Value<span class="token punctuation">)</span><span class="token punctuation">;</span>            
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>The test creates a HttpRequest by calling <strong>HttpRequestSetup</strong> and uses the LogWriter (which is the <strong>log</strong> parameter that you see). And it tests if what the function returns is equal to &quot;Hello, Michael&quot;. You can check out the full code sample <a href="https://github.com/Azure-Samples/functions-unittesting-sample" target="_blank" rel="noopener noreferrer">on GitHub<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. And you can run the test from Visual Studio, by clicking on the <strong>Test</strong> menu and clicking <strong>Run &gt; All Tests</strong>.</p> <img src="/AzureTipsAndTricks/files/RunTests.png"> <p>(Run tests in Visual Studio)</p> <h5 id="creating-integration-tests-for-azure-functions"><a href="#creating-integration-tests-for-azure-functions" aria-hidden="true" class="header-anchor">#</a> Creating Integration Tests for Azure Functions</h5> <p>Integration tests are more difficult than unit tests. An integration test for an Azure Function should start the Azure Function runtime and perform all of he actions needed within the function. Currently, there isn't a great way to create and run integration tests for Azure Functions yet. Until that is available, you can make it work by using some hardcoded strings. Let's try that out.</p> <p>We will test the same HttpTrigger function that we've tested with unit tests. This is the default code that you get when you create a new HttpTrigger Azure Function.
Now, we want to create an integration test for the function. This means that we will start the function locally and send HTTP to it to trigger it and make it run. You can create the integration test in the same test project that we've created earlier for the unit tests.</p> <p>The integration test will look like this:</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token punctuation">[</span><span class="token class-name">TestMethod</span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token class-name">Task</span> <span class="token function">HttpTrigger</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token function">StartHost</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">string</span> name <span class="token operator">=</span> <span class="token string">&quot;Michael&quot;</span><span class="token punctuation">;</span>

    <span class="token keyword">await</span> <span class="token function">SendHttpRequest</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">EndHost</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>The first thing that we do is to start the function host with the <strong>StartHost()</strong> method.</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token keyword">private</span> <span class="token class-name">Process</span> _host<span class="token punctuation">;</span>

<span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">StartHost</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token keyword">string</span> filename <span class="token operator">=</span>
        <span class="token string">@&quot;C:\Users\Michael\AppData\Local\AzureFunctionsTools\Releases\2.10.1\cli\func.exe&quot;</span><span class="token punctuation">;</span>

    <span class="token keyword">const</span> <span class="token keyword">string</span> args <span class="token operator">=</span> <span class="token string">&quot;host start&quot;</span><span class="token punctuation">;</span>

    <span class="token keyword">const</span> <span class="token keyword">string</span> binDir <span class="token operator">=</span> <span class="token string">@&quot;C:\Users\Michael\functions-unittesting-sample-master\DotNet\bin\Debug\netstandard2.0\bin&quot;</span><span class="token punctuation">;</span>

    <span class="token class-name">ProcessStartInfo</span> hostProcess <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ProcessStartInfo</span>
    <span class="token punctuation">{</span>
        FileName <span class="token operator">=</span> filename<span class="token punctuation">,</span>
        Arguments <span class="token operator">=</span> args<span class="token punctuation">,</span>
        WorkingDirectory <span class="token operator">=</span> binDir
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    _host <span class="token operator">=</span> Process<span class="token punctuation">.</span><span class="token function">Start</span><span class="token punctuation">(</span>hostProcess<span class="token punctuation">)</span><span class="token punctuation">;</span>

    Thread<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span><span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>We start the function host by calling <strong>func.exe</strong> with the arguments <strong>&quot;host start&quot;</strong> and the directory that contains the Azure Function dll. The path to func.exe can be different on your machine, so search for it to find your path. The same goes for the path to the function dll. Once the host process is started, I make the thread sleep for 5 seconds, giving the function 5 seconds to complete. I don't think that this is an elegant way to call the function, but it works for now. In the future, the tooling might provide for better ways to do this.</p> <p>Once the runtime has started, I call <strong>SendHttpRequest</strong> and send along the string <strong>&quot;Michael&quot;</strong>.</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token keyword">private</span> <span class="token keyword">async</span> <span class="token class-name">Task</span> <span class="token function">SendHttpRequest</span><span class="token punctuation">(</span><span class="token keyword">string</span> name<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name">HttpClient</span> client <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HttpClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">string</span> json <span class="token operator">=</span> $<span class="token string">&quot;{{\&quot;Name\&quot;: \&quot;&quot;</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">&quot;\&quot;}&quot;</span><span class="token punctuation">;</span>

    <span class="token keyword">var</span> content <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringContent</span><span class="token punctuation">(</span>json<span class="token punctuation">,</span> Encoding<span class="token punctuation">.</span>UTF8<span class="token punctuation">,</span> <span class="token string">&quot;application/json&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">var</span> response <span class="token operator">=</span>
    <span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">PostAsync</span><span class="token punctuation">(</span><span class="token string">@&quot;http://localhost:7071/api/HttpTrigger&quot;</span><span class="token punctuation">,</span> content<span class="token punctuation">)</span><span class="token punctuation">;</span>

    Assert<span class="token punctuation">.</span><span class="token function">AreEqual</span><span class="token punctuation">(</span><span class="token string">&quot;Hello, Michael&quot;</span><span class="token punctuation">,</span> response<span class="token punctuation">.</span>Content<span class="token punctuation">.</span><span class="token function">ReadAsStringAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">await</span> Task<span class="token punctuation">.</span><span class="token function">Delay</span><span class="token punctuation">(</span><span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>This method builds a string that we'll send as Json, which contains the name &quot;Michael&quot;. Next, we send this payload with a POST method of the HttpClient object to the address http://localhost:7071/api/HttpTrigger, which is the local address of the Azure Function. You can find your address by locally running your Azure Function. The address will show up in the command prompt that outputs the function information. Finally, I check if what the function returns, matches the string &quot;Hello, Michael&quot;. And again, I give the function 5 seconds to respond. In this case, by calling <strong>await Task.Delay(5000)</strong></p> <p>And finally, I shut the function host process down:</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">EndHost</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    _host<span class="token punctuation">.</span><span class="token function">CloseMainWindow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    _host<span class="token punctuation">.</span><span class="token function">Dispose</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>And that's it! A very simple example of an integration test for Azure Functions. And you can run this test by running it from Visual Studio, for instance, by clicking on the <strong>Test</strong> menu and clicking <strong>Run &gt; All tests</strong>.
Azure Functions integration tests can quickly become more complicated. For instance when you have a different trigger, like a Queue-, or a Blob-trigger. And you can have output bindings as well. In those cases, you can simulate all of that behavior by actually calling those services, preferably development versions of them, like those in the local development storage.</p> <h5 id="conclusion"><a href="#conclusion" aria-hidden="true" class="header-anchor">#</a> Conclusion</h5> <p>You can test Azure Functions by creating unit and integration-tests for them.
Unit tests are relatively easy as you mock the behavior of things that go in and out of your function (and everything in between). And if you ask me, you don't always have to create unit tests that test all of the input and output parameters of the function. You could just test whatever is inside the function, as that is the code that matters.
Creating integration tests for Azure Functions is possible, but not pretty. It requires some hardcoded values, which isn't ideal, but you can make it work.</p></div> <div class="page-edit" data-v-0e4468e2><div class="edit-link" data-v-0e4468e2><a href="https://github.com/microsoft/azuretipsandtricks/edit/master/blog/tip196.md" target="_blank" rel="noopener noreferrer" data-v-0e4468e2>Edit this page on GitHub</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound" data-v-0e4468e2 data-v-0e4468e2><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <section class="share" data-v-0e4468e2><h2 data-v-0e4468e2>Share</h2> <a href="https://twitter.com/intent/tweet?text=Tip 196 - Testing Azure Functions by @mbcrump http://azuredev.tips/blog/tip196.html" target="_blank" class="share__button" data-v-0e4468e2><i class="fab fa-twitter" data-v-0e4468e2></i> Tweet
    </a></section></div> <!----></div> <div class="page-nav" data-v-0e4468e2><p class="inner" data-v-0e4468e2><span class="prev" data-v-0e4468e2>
        ←
        <a href="/AzureTipsAndTricks/blog/tip197.html" class="prev" data-v-0e4468e2>
          Tip 197 - Getting started with Azure API Management
        </a></span> <span class="next" data-v-0e4468e2><a href="/AzureTipsAndTricks/blog/tip195.html" data-v-0e4468e2>
          Tip 195 - Use Azure Monitor to track custom events
        </a>
        →
      </span></p></div> </div> <!----></div><div class="global-ui"></div></div>
    <script src="/AzureTipsAndTricks/assets/js/app.c6e6cf6c.js" defer></script><script src="/AzureTipsAndTricks/assets/js/4.1e17da4f.js" defer></script><script src="/AzureTipsAndTricks/assets/js/111.aaa2dfc0.js" defer></script>
  </body>
</html>
